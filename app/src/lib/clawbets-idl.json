{
  "address": "3kBwjzUXtVeUshBWDD1Ls5PZPqQZgQUGNUTdP6jCqobb",
  "metadata": {
    "name": "clawbets",
    "version": "0.1.0",
    "spec": "0.1.0",
    "description": "Prediction Market Protocol for AI Agents on Solana"
  },
  "instructions": [
    {
      "name": "cancel_market",
      "discriminator": [
        205,
        121,
        84,
        210,
        222,
        71,
        150,
        11
      ],
      "accounts": [
        {
          "name": "creator",
          "writable": true,
          "signer": true,
          "relations": [
            "market"
          ]
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          }
        }
      ],
      "args": []
    },
    {
      "name": "claim_winnings",
      "discriminator": [
        161,
        215,
        24,
        59,
        14,
        236,
        242,
        221
      ],
      "accounts": [
        {
          "name": "bettor",
          "writable": true,
          "signer": true,
          "relations": [
            "bet"
          ]
        },
        {
          "name": "market",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          },
          "relations": [
            "bet"
          ]
        },
        {
          "name": "bet",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  98,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              },
              {
                "kind": "account",
                "path": "bettor"
              }
            ]
          }
        },
        {
          "name": "vault",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              }
            ]
          }
        },
        {
          "name": "reputation",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  114,
                  101,
                  112,
                  117,
                  116,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "bettor"
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "close_betting",
      "discriminator": [
        183,
        243,
        76,
        1,
        242,
        130,
        138,
        58
      ],
      "accounts": [
        {
          "name": "caller",
          "writable": true,
          "signer": true
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          }
        }
      ],
      "args": []
    },
    {
      "name": "create_market",
      "discriminator": [
        103,
        226,
        97,
        235,
        200,
        188,
        251,
        254
      ],
      "accounts": [
        {
          "name": "creator",
          "writable": true,
          "signer": true
        },
        {
          "name": "protocol",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108
                ]
              }
            ]
          }
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "protocol.market_count",
                "account": "Protocol"
              }
            ]
          }
        },
        {
          "name": "vault",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              }
            ]
          }
        },
        {
          "name": "reputation",
          "docs": [
            "Reputation account for the creator (init if needed)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  114,
                  101,
                  112,
                  117,
                  116,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "creator"
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "title",
          "type": "string"
        },
        {
          "name": "description",
          "type": "string"
        },
        {
          "name": "feed_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "target_price",
          "type": "i64"
        },
        {
          "name": "target_above",
          "type": "bool"
        },
        {
          "name": "deadline",
          "type": "i64"
        },
        {
          "name": "resolution_deadline",
          "type": "i64"
        },
        {
          "name": "min_bet",
          "type": "u64"
        },
        {
          "name": "max_bet",
          "type": "u64"
        }
      ]
    },
    {
      "name": "expire_market",
      "discriminator": [
        213,
        191,
        249,
        51,
        63,
        168,
        186,
        180
      ],
      "accounts": [
        {
          "name": "caller",
          "writable": true,
          "signer": true
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          }
        }
      ],
      "args": []
    },
    {
      "name": "initialize",
      "discriminator": [
        175,
        175,
        109,
        31,
        13,
        152,
        155,
        237
      ],
      "accounts": [
        {
          "name": "admin",
          "writable": true,
          "signer": true
        },
        {
          "name": "protocol",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108
                ]
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "place_bet",
      "discriminator": [
        222,
        62,
        67,
        220,
        63,
        166,
        126,
        33
      ],
      "accounts": [
        {
          "name": "bettor",
          "writable": true,
          "signer": true
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          }
        },
        {
          "name": "bet",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  98,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              },
              {
                "kind": "account",
                "path": "bettor"
              }
            ]
          }
        },
        {
          "name": "vault",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              }
            ]
          }
        },
        {
          "name": "reputation",
          "docs": [
            "Reputation account for the bettor (init if needed)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  114,
                  101,
                  112,
                  117,
                  116,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "bettor"
              }
            ]
          }
        },
        {
          "name": "protocol",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108
                ]
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "amount",
          "type": "u64"
        },
        {
          "name": "position",
          "type": "bool"
        }
      ]
    },
    {
      "name": "reclaim_bet",
      "discriminator": [
        48,
        55,
        169,
        101,
        117,
        111,
        28,
        172
      ],
      "accounts": [
        {
          "name": "bettor",
          "writable": true,
          "signer": true,
          "relations": [
            "bet"
          ]
        },
        {
          "name": "market",
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          },
          "relations": [
            "bet"
          ]
        },
        {
          "name": "bet",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  98,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              },
              {
                "kind": "account",
                "path": "bettor"
              }
            ]
          }
        },
        {
          "name": "vault",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market"
              }
            ]
          }
        },
        {
          "name": "system_program",
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "resolve_market",
      "discriminator": [
        155,
        23,
        80,
        173,
        46,
        74,
        23,
        239
      ],
      "accounts": [
        {
          "name": "resolver",
          "writable": true,
          "signer": true
        },
        {
          "name": "market",
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  109,
                  97,
                  114,
                  107,
                  101,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "market.market_id",
                "account": "Market"
              }
            ]
          }
        },
        {
          "name": "price_update",
          "docs": [
            "Pyth PriceUpdateV2 account â€” posted on-chain via Hermes + Pyth receiver.",
            "Anchor automatically validates this is owned by the Pyth receiver program."
          ]
        }
      ],
      "args": []
    }
  ],
  "accounts": [
    {
      "name": "AgentReputation",
      "discriminator": [
        245,
        56,
        239,
        246,
        36,
        231,
        227,
        67
      ]
    },
    {
      "name": "Bet",
      "discriminator": [
        147,
        23,
        35,
        59,
        15,
        75,
        155,
        32
      ]
    },
    {
      "name": "Market",
      "discriminator": [
        219,
        190,
        213,
        55,
        0,
        227,
        198,
        154
      ]
    },
    {
      "name": "PriceUpdateV2",
      "discriminator": [
        34,
        241,
        35,
        99,
        157,
        126,
        244,
        205
      ]
    },
    {
      "name": "Protocol",
      "discriminator": [
        45,
        39,
        101,
        43,
        115,
        72,
        131,
        40
      ]
    }
  ],
  "errors": [
    {
      "code": 6000,
      "name": "TitleTooLong",
      "msg": "Title too long (max 128 characters)"
    },
    {
      "code": 6001,
      "name": "DescriptionTooLong",
      "msg": "Description too long (max 512 characters)"
    },
    {
      "code": 6002,
      "name": "DeadlineInPast",
      "msg": "Deadline must be in the future"
    },
    {
      "code": 6003,
      "name": "InvalidResolutionDeadline",
      "msg": "Resolution deadline must be after betting deadline"
    },
    {
      "code": 6004,
      "name": "InvalidMinBet",
      "msg": "Minimum bet must be greater than zero"
    },
    {
      "code": 6005,
      "name": "InvalidMaxBet",
      "msg": "Maximum bet must be >= minimum bet"
    },
    {
      "code": 6006,
      "name": "MarketNotOpen",
      "msg": "Market is not open for betting"
    },
    {
      "code": 6007,
      "name": "BettingClosed",
      "msg": "Betting deadline has passed"
    },
    {
      "code": 6008,
      "name": "BetTooSmall",
      "msg": "Bet amount below minimum"
    },
    {
      "code": 6009,
      "name": "BetTooLarge",
      "msg": "Bet amount above maximum"
    },
    {
      "code": 6010,
      "name": "MarketNotReady",
      "msg": "Market cannot be resolved yet (deadline not passed)"
    },
    {
      "code": 6011,
      "name": "ResolutionExpired",
      "msg": "Market resolution deadline has passed"
    },
    {
      "code": 6012,
      "name": "MarketNotResolved",
      "msg": "Market is not resolved"
    },
    {
      "code": 6013,
      "name": "AlreadyClaimed",
      "msg": "Bet already claimed"
    },
    {
      "code": 6014,
      "name": "BetDidNotWin",
      "msg": "Bet did not win"
    },
    {
      "code": 6015,
      "name": "MarketHasBets",
      "msg": "Market has existing bets and cannot be cancelled"
    },
    {
      "code": 6016,
      "name": "MarketNotCancelled",
      "msg": "Market is not cancelled"
    },
    {
      "code": 6017,
      "name": "UnauthorizedCreator",
      "msg": "Only market creator can perform this action"
    },
    {
      "code": 6018,
      "name": "Overflow",
      "msg": "Arithmetic overflow"
    },
    {
      "code": 6019,
      "name": "InvalidOracleData",
      "msg": "Invalid oracle price data"
    },
    {
      "code": 6020,
      "name": "StaleOraclePrice",
      "msg": "Oracle price is stale"
    }
  ],
  "types": [
    {
      "name": "AgentReputation",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "agent",
            "docs": [
              "Agent's public key"
            ],
            "type": "pubkey"
          },
          {
            "name": "total_bets",
            "docs": [
              "Total bets placed"
            ],
            "type": "u32"
          },
          {
            "name": "wins",
            "docs": [
              "Total bets won"
            ],
            "type": "u32"
          },
          {
            "name": "losses",
            "docs": [
              "Total bets lost"
            ],
            "type": "u32"
          },
          {
            "name": "total_wagered",
            "docs": [
              "Total SOL wagered (in lamports)"
            ],
            "type": "u64"
          },
          {
            "name": "total_won",
            "docs": [
              "Total SOL won (in lamports)"
            ],
            "type": "u64"
          },
          {
            "name": "total_lost",
            "docs": [
              "Total SOL lost (in lamports)"
            ],
            "type": "u64"
          },
          {
            "name": "markets_created",
            "docs": [
              "Markets created"
            ],
            "type": "u32"
          },
          {
            "name": "accuracy_bps",
            "docs": [
              "Accuracy basis points (wins * 10000 / total_bets)"
            ],
            "type": "u16"
          },
          {
            "name": "last_active",
            "docs": [
              "Last activity timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "Bump seed"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "Bet",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "bettor",
            "docs": [
              "Bettor's public key"
            ],
            "type": "pubkey"
          },
          {
            "name": "market",
            "docs": [
              "Market this bet belongs to"
            ],
            "type": "pubkey"
          },
          {
            "name": "amount",
            "docs": [
              "Amount in lamports"
            ],
            "type": "u64"
          },
          {
            "name": "position",
            "docs": [
              "YES (true) or NO (false)"
            ],
            "type": "bool"
          },
          {
            "name": "claimed",
            "docs": [
              "Whether winnings have been claimed"
            ],
            "type": "bool"
          },
          {
            "name": "placed_at",
            "docs": [
              "Timestamp of bet placement"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "Bump seed"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "Market",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "creator",
            "docs": [
              "Market creator"
            ],
            "type": "pubkey"
          },
          {
            "name": "market_id",
            "docs": [
              "Sequential market ID"
            ],
            "type": "u64"
          },
          {
            "name": "title",
            "docs": [
              "Market title (e.g., \"SOL above $250 by Feb 20?\")"
            ],
            "type": "string"
          },
          {
            "name": "description",
            "docs": [
              "Market description"
            ],
            "type": "string"
          },
          {
            "name": "feed_id",
            "docs": [
              "Pyth price feed ID (32 bytes, e.g. SOL/USD feed id from Pyth)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "target_price",
            "docs": [
              "Target price (in oracle price format, scaled)"
            ],
            "type": "i64"
          },
          {
            "name": "target_above",
            "docs": [
              "True = bet on price being ABOVE target, False = BELOW"
            ],
            "type": "bool"
          },
          {
            "name": "deadline",
            "docs": [
              "Unix timestamp when betting closes"
            ],
            "type": "i64"
          },
          {
            "name": "resolution_deadline",
            "docs": [
              "Unix timestamp by which market must be resolved"
            ],
            "type": "i64"
          },
          {
            "name": "min_bet",
            "docs": [
              "Minimum bet amount in lamports"
            ],
            "type": "u64"
          },
          {
            "name": "max_bet",
            "docs": [
              "Maximum bet amount in lamports"
            ],
            "type": "u64"
          },
          {
            "name": "total_yes",
            "docs": [
              "Total SOL bet on YES"
            ],
            "type": "u64"
          },
          {
            "name": "total_no",
            "docs": [
              "Total SOL bet on NO"
            ],
            "type": "u64"
          },
          {
            "name": "yes_count",
            "docs": [
              "Number of YES bettors"
            ],
            "type": "u32"
          },
          {
            "name": "no_count",
            "docs": [
              "Number of NO bettors"
            ],
            "type": "u32"
          },
          {
            "name": "status",
            "docs": [
              "Market status"
            ],
            "type": {
              "defined": {
                "name": "MarketStatus"
              }
            }
          },
          {
            "name": "outcome",
            "docs": [
              "Winning side (set after resolution)"
            ],
            "type": {
              "option": "bool"
            }
          },
          {
            "name": "resolved_price",
            "docs": [
              "Oracle price at resolution"
            ],
            "type": {
              "option": "i64"
            }
          },
          {
            "name": "resolved_at",
            "docs": [
              "Timestamp of resolution"
            ],
            "type": {
              "option": "i64"
            }
          },
          {
            "name": "created_at",
            "docs": [
              "Market creation timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "Bump seed"
            ],
            "type": "u8"
          },
          {
            "name": "vault_bump",
            "docs": [
              "Vault bump seed"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "MarketStatus",
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Open"
          },
          {
            "name": "Closed"
          },
          {
            "name": "Resolved"
          },
          {
            "name": "Cancelled"
          },
          {
            "name": "Expired"
          }
        ]
      }
    },
    {
      "name": "PriceFeedMessage",
      "repr": {
        "kind": "c"
      },
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "feed_id",
            "docs": [
              "`FeedId` but avoid the type alias because of compatibility issues with Anchor's `idl-build` feature."
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "price",
            "type": "i64"
          },
          {
            "name": "conf",
            "type": "u64"
          },
          {
            "name": "exponent",
            "type": "i32"
          },
          {
            "name": "publish_time",
            "docs": [
              "The timestamp of this price update in seconds"
            ],
            "type": "i64"
          },
          {
            "name": "prev_publish_time",
            "docs": [
              "The timestamp of the previous price update. This field is intended to allow users to",
              "identify the single unique price update for any moment in time:",
              "for any time t, the unique update is the one such that prev_publish_time < t <= publish_time.",
              "",
              "Note that there may not be such an update while we are migrating to the new message-sending logic,",
              "as some price updates on pythnet may not be sent to other chains (because the message-sending",
              "logic may not have triggered). We can solve this problem by making the message-sending mandatory",
              "(which we can do once publishers have migrated over).",
              "",
              "Additionally, this field may be equal to publish_time if the message is sent on a slot where",
              "where the aggregation was unsuccesful. This problem will go away once all publishers have",
              "migrated over to a recent version of pyth-agent."
            ],
            "type": "i64"
          },
          {
            "name": "ema_price",
            "type": "i64"
          },
          {
            "name": "ema_conf",
            "type": "u64"
          }
        ]
      }
    },
    {
      "name": "PriceUpdateV2",
      "docs": [
        "A price update account. This account is used by the Pyth Receiver program to store a verified price update from a Pyth price feed.",
        "It contains:",
        "- `write_authority`: The write authority for this account. This authority can close this account to reclaim rent or update the account to contain a different price update.",
        "- `verification_level`: The [`VerificationLevel`] of this price update. This represents how many Wormhole guardian signatures have been verified for this price update.",
        "- `price_message`: The actual price update.",
        "- `posted_slot`: The slot at which this price update was posted."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "write_authority",
            "type": "pubkey"
          },
          {
            "name": "verification_level",
            "type": {
              "defined": {
                "name": "VerificationLevel"
              }
            }
          },
          {
            "name": "price_message",
            "type": {
              "defined": {
                "name": "PriceFeedMessage"
              }
            }
          },
          {
            "name": "posted_slot",
            "type": "u64"
          }
        ]
      }
    },
    {
      "name": "Protocol",
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "admin",
            "type": "pubkey"
          },
          {
            "name": "market_count",
            "type": "u64"
          },
          {
            "name": "total_volume",
            "type": "u64"
          },
          {
            "name": "bump",
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "VerificationLevel",
      "docs": [
        "Pyth price updates are bridged to all blockchains via Wormhole.",
        "Using the price updates on another chain requires verifying the signatures of the Wormhole guardians.",
        "The usual process is to check the signatures for two thirds of the total number of guardians, but this can be cumbersome on Solana because of the transaction size limits,",
        "so we also allow for partial verification.",
        "",
        "This enum represents how much a price update has been verified:",
        "- If `Full`, we have verified the signatures for two thirds of the current guardians.",
        "- If `Partial`, only `num_signatures` guardian signatures have been checked.",
        "",
        "# Warning",
        "Using partially verified price updates is dangerous, as it lowers the threshold of guardians that need to collude to produce a malicious price update."
      ],
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Partial",
            "fields": [
              {
                "name": "num_signatures",
                "type": "u8"
              }
            ]
          },
          {
            "name": "Full"
          }
        ]
      }
    }
  ]
}